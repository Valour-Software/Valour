#!/bin/sh

# Install .NET 10 (preview)
curl -sSL https://dot.net/v1/dotnet-install.sh > dotnet-install.sh
chmod +x dotnet-install.sh
./dotnet-install.sh --channel 10.0 -InstallDir ./dotnet
./dotnet/dotnet --version

# Build Valour Client.Blazor for Cloudflare Pages
./dotnet/dotnet workload restore Valour/Client.Blazor/Valour.Client.Blazor.csproj
./dotnet/dotnet workload install wasm-tools
./dotnet/dotnet publish Valour/Client.Blazor/Valour.Client.Blazor.csproj -c Release -o output
